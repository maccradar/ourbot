require("print")
import("rtt_ros")
ros.import("Communicator")
ros.import("Dummy")

loadComponent("communicator", "Communicator")
loadComponent("dummy", "Dummy")

loadService("communicator", "marshalling")
communicator.marshalling.loadProperties("../Configuration/system-config.cpf")
communicator.marshalling.loadProperties("../Configuration/communicator-config.cpf")

communicator.setPeriod(0.01)
dummy.setPeriod(0.1)

communicator.setHost("emperor")
communicator.configure()
dummy.configure()

connectPeers("dummy","communicator")


//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port1", "vec1", "kurt")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port1", "vec1", "krist")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port1", "vec1")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port1", "vec1", "dave")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port1", "vec1", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port2", "vec2", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port3", "vec3", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port4", "vec4", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port5", "vec5", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port6", "vec6", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port7", "vec7", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port8", "vec8", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port9", "vec9", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port10", "vec10", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port11", "vec11", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port12", "vec12", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port13", "vec13", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port14", "vec14", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port15", "vec15", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port16", "vec16", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port17", "vec17", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port18", "vec18", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port19", "vec19", "ourbots")
//communicator.addOutgoingConnection("dummy", "dummy_vec_out_port20", "vec20", "ourbots")

communicator.start()
dummy.start()

