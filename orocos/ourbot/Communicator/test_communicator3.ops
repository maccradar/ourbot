require("print")
import("rtt_ros")
ros.import("Communicator")
ros.import("Dummy")

loadComponent("communicator", "Communicator")
loadComponent("dummy", "Dummy")

loadService("communicator", "marshalling")
communicator.marshalling.loadProperties("../Configuration/system-config.cpf")
communicator.marshalling.loadProperties("../Configuration/communicator-config.cpf")

communicator.setPeriod(0.01)
dummy.setPeriod(0.1)

communicator.setHost("krist")
communicator.configure()
dummy.configure()

connectPeers("dummy","communicator")



communicator.addIncomingConnection("dummy", "dummy_vec_in_port1", "vec1")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port2", "vec1")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port3", "vec3")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port4", "vec4")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port5", "vec5")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port6", "vec6")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port7", "vec7")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port8", "vec8")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port9", "vec9")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port10", "vec10")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port11", "vec11")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port12", "vec12")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port13", "vec13")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port14", "vec14")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port15", "vec15")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port16", "vec16")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port17", "vec17")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port18", "vec18")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port19", "vec19")
//communicator.addIncomingConnection("dummy", "dummy_vec_in_port20", "vec20")


communicator.start()
dummy.start()

