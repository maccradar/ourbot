require("print")
import("rtt_ros")
ros.import("rtt_rospack")

ros.import("VelocityCommandInterface")
ros.import("Communicator")

loadComponent("vel", "ExampleVelocityCommand")
loadComponent("com", "Communicator")

connectPeers("vel", "com")

print.ln("add outgoing connection")
com.addOutgoing("vel", "test_port_vec_out", 4000, "broadcast")
print.ln("add incoming connection")
com.addIncoming("vel", "test_port_vec_in", 4000)

vel.configure()
com.configure()

vel.setPeriod(1)
com.setPeriod(0.5)

com.start()
vel.start()


#loadComponent("lua","OCL::LuaComponent")
#lua.setPeriod(0.1)
#lua.exec_file("test.lua")
#addPeer("lua","Deployer")
#lua.configure()
